# Copyright (C) 2023-2025 Cognizant Digital Business, Evolutionary AI.
# All Rights Reserved.
# Issued under the Academic Public License.
#
# You can be released from the terms, and requirements of the Academic Public
# License by purchasing a commercial license.
# Purchase of a commercial license is mandatory for any use of the
# neuro-san SDK Software in commercial settings.
#
# END COPYRIGHT

include "registries/aaosa_basic.hocon"

llm_config {
    class = "openai"
    model_name = "gpt-4.1-mini"
}

tools = [
    # This is the agent network's entry point.
    {
        name = "CoffeeFinder"
        function {
            description = """Finds coffee at any time of day."""
        }
        instructions =
"""
Answer user inquiries about coffee places and take orders.
Always return order IDs and details when placing orders.
Do not worry about the location.
This is NOT a game. Do NOT make up answers.
Call ALL your downstream agents before answering.
Be as succinct as possible in your response, while explaining the reasoning process if needed.
Ask the user back if you need additional information.
""" ${aaosa_instructions}
        tools = ["CoffeeShop", "FastFoodChain", "GasStation", "LiquorStore"]
        "structure_formats": "json"
    }
    {
        name = "CoffeeShop",
        function = ${aaosa_call}
        instructions =
"""
Your name is Bob's Coffee Shop.
You have a single location.
You can provide coffee depending on the time of day.
You're open between 7 am and 6 pm.
Any other time, you're closed.
You must know the time of day to provide an answer.
Take orders using your OrderAPI tool if you're open and return the order id and details.
Otherwise answer you're closed.
This is not a game. Do not make up answers.
Ask for follow-up information if needed.
""" ${aaosa_instructions},
        command = ${aaosa_command}
        tools = ["OrderAPI"]
    }
    {
        name = "FastFoodChain",
        function = ${aaosa_call}
        instructions =
"""
Your name is Henry's Fast Food.
You have a single location.
You can provide coffee depending on the time of day.
You're open between 5:30 am and 12 am.
Any other time, you're closed.
You must know the time of day to provide an answer.
Take orders using your OrderAPI tool if you're open and return the order id and details.
Otherwise answer you're closed.
This is not a game. Do not make up answers.
Ask for follow-up information if needed.
""" ${aaosa_instructions}
        command = ${aaosa_command}
        tools = ["OrderAPI"]
    }
    {
        name = "GasStation"
        function = ${aaosa_call}
        instructions =
"""
Your name is Joe's Gas Station.
You have a single location.
You can provide coffee at any time.
Take orders using your OrderAPI tool if you're open and return the order id and details.
Otherwise answer you're closed.
This is not a game. Do not make up answers.
Ask for follow-up information if needed.
""" ${aaosa_instructions},
        command = ${aaosa_command}
        tools = ["OrderAPI"]
    }
    {
        name = "LiquorStore"
        function = ${aaosa_call}
        instructions =
"""
Your name is Jack's Liquor Store.
You have a single location.
You sell alcohol at any time of the day,
provided the user is of legal age: 21 years or older.
Take orders using your OrderAPI tool if you're open and return the order id and details.
Otherwise answer you're closed.
This is not a game. Do not make up answers.
Ask for follow-up information if needed.
""" ${aaosa_instructions},
        command = ${aaosa_command}
        tools = ["OrderAPI"]
    }
    {
        name = "OrderAPI"
        function = {
            description =
"""Use this API to place orders with a shop.
Always return the order ID and details to the caller."""
            parameters = {
                type = "object"
                properties = {
                    shop_name = {
                        type = "string"
                        description = "The name of the shop to order from."
                    }
                    customer_name = {
                        type = "string"
                        description = "The name of the person to order for."
                    }
                    order_details = {
                        type = "string"
                        description = "the details of the order."
                    }
                }
                required = ["shop_name", "customer_name", "order_details"]
            }
        }
        class = "order_api.OrderAPI"
    }
]
